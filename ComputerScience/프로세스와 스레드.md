# 프로세스와 스레드
## 프로세스
#### 연속적으로 실행되고 있는 "프로그램"으로 운영체제에게 시스템 자원을 할당받는 작업의 단위를 말한다.

<br/>

> 프로그램 : 어떤 작업을 위해 실행할 수 있는 파일 / 보조기억장치에 저장된 실행파일

<br/>

### OS에게 할당받는 시스템 자원의 예
* CPU 시간
* 운영되기 위해 필요한 주소 공간
* code, data, heap, stack의 구조로 되어있는 독립된 메모리 공간

<br/>

### 특징
* 각 프로세스는 독립된 메모리 영역을 할당받기 때문에, 다른 프로세스의 변수나 자료구조에 접근할 수 없다. (접근하려면 프로세스 간의 통신을 사용해야 함)
* 기본적으로 프로세스당 최소 1개의 스레드(메인스레드)를 가진다.

<br/>

---

<br/>

## 스레드
#### 한 프로세스 내에서 동작되는 여러 실행의 흐름
#### 개발자가 프로그래밍할 때 동시적 처리를 위해 사용하는 스레드 (소프트웨어적인 스레드)

<br/>

### 특징
* 각 스레드는 Stack영역만 따로 할당받고, Code, Data, Heap 영역은 공유한다.
* Stack영역을 제외한 나머지 영역의 자원을 같은 프로세스 안에 있는 스레드들이 공유해야 하기 때문에 **공유자원**의 문제가 발생할 수 있다.

<br/>

### Stack영역만 분리하여 따로 사용하는 이유(?)
* Stack은 LIFO(후입선출) 방식으로 동작한다.
* 스택에 작업이 쌓이면 가장 마지막 작업부터 반환되는데, 여러 스레드에서 같은 Stack영역을 공유할 경우 순서가 섞이는 등 문제가 발생할 수 있다.
* 이런 동작방식 때문에 원활한 실행 흐름을 위해 Stack영역만 독립적으로 사용한다.

<br/>

---

<br/>

## 멀티 프로세스
#### 하나의 프로그램을 여러 개의 프로세스로 구성하여, 각 프로세스마다 하나의 작업을 처리하도록 하는 것
#### ex) 구글 크롬 (각 탭이 프로세스)

<br/>

### 장점 :
* 여러 개의 자식 프로세스 중 하나에 문제가 발생해도 다른 프로세스에 영향을 미치지 않는다. (독립된 구조로 안정성이 높음)
   * ex) 크롬 브라우저 : 각각의 탭이 프로세스로 동작한다. 하나의 탭에 문제가 발생해도 다른 탭에 영향을 미치지 않아서 안정적이지만, 개별 탭마다 독립된 메모리 영역을 가지기 때문에 무겁다는 단점이 있다.

<br/>

### 단점 :
* Context Switching과정에서 오버헤드가 발생한다
   * CPU는 각 프로세스를 빠르게 Switching하면서 실행시키는데, 프로세스는 메모리가 모두 독립적으로 존재하기 때문에 CPU의 부담이 커지고, 오버헤드가 발생한다.
   * 프로세스 간 공유하는 메모리가 없어서 Context Switching이 발생하면 캐시에 있는 모든 데이터를 리셋하고, 다시 캐시 정보를 불러와야 함
* 프로세스 간 자원 공유가 어렵다. => 다른 프로세스의 자원에 접근하려고 한다면 **프로세스간 통신(IPC)**를 사용해야 함

<br/>

---

<br/>

## 멀티 스레드
#### 하나의 프로그램을 여러 개의 스레드로 구성하여, 각 스레드가 하나의 작업을 처리하도록 하는 것
#### 윈도우, 리눅스 등 많은 운영체제가 멀티 프로세싱을 지원하지만, 멀티 스레딩을 기본으로 한다.
#### ex) 대부분의 브라우저

<br/>

### 장점 :
* 각 스레드가 Code, Data, Heap영역을 공유하기 때문에 Context Switching이 빠르다.
* 프로세스를 생성하여 자원을 할당하는 시스템 콜이 줄어들고, 스레드의 생성/종료 시간이 프로세스보다 빠르다.
* 프로세스 간 통신이 까다로운 반면, 스레드는 Stack영역을 제외한 나머지 영역을 공유하기 때문에 통신 방법이 간편하다.

<br/>

### 단점 :
* 설계가 까다롭다 => Stack영역을 제외한 다른 영역을 공유하기 때문에, 자원 공유의 문제가 발생할 수 있다. (동기화 문제)
* 디버깅이 까다롭다.
* 각 스레드가 독립적이지 않아서, 하나의 스레드에 문제가 발생하면 모든 스레드에 영향을 미친다.

