# 동시성 프로그래밍
* [비동기처리가 필요한 이유](#비동기처리가-필요한-이유)
* [비동기와 동시의 개념]()
* [GCD의 개념 및 종류]()
* [GCD상요시 주의할 사항]()
* [비동기 함수/메서드의 이해]()
* [Async/await (Swift 5.5~)]()
* [동시성 프로그래밍과 관련된 문제점]()
* [동시성 프로그래밍 문제점의 해결]()
* [동시성 프로그래밍의 메모리 구조]()

<br/>

---

<br/>

## 비동기처리가 필요한 이유

<br/>

### **앱의 동작방식**
![앱 동작순서 이미지](https://miro.medium.com/max/1400/1*0XS9grFLWcz6Quzdu5syGw.png)
* iOS의 앱은 위 그림의 순서로 동작한다.
* 앱이 실행되면 LaunchTime에서 초기설정(?)이 이루어진 후 RunLoop(EventLoop)라는 무한반복문이 생성된다.
* 런루프는 이벤트 처리를 담당한다. => 어떠한 이벤트가 발생하면 어떤 함수를 실행시킬 것인지 선택해서 실행시킨다.
* 이벤트 처리의 속도는 CPU 클럭의 성능에 맞게 동작한다. (3.5Ghz = 초당 35억번의 처리)
* 모든 작업마다 화면을 업데이트할 수 없기 때문에 주사율을 기준으로 일정 주기마다 화면을 업데이트 해준다. (60Hz 주사율을 지원하는 아이폰은 1/60초마다 화면을 업데이트)
* 단, 화면을 업데이트할 필요가 없다면 다시 그리지 않는다.

<br/>

### 일정 주기로 실행되는 화면 업데이트는 반드시 메인 스레드에서만 작업할 수 있다.

<br/>

#### 시간이 오래걸리지 않는 작업들을 처리할 때에는 메인스레드에서 모든 작업을 수행해도 문제가 발생하지 않았다.

<br/>

#### 하지만 네트워크 작업처럼 오래걸리는 작업을 메인스레드 하나에서 모두 진행하면, 네트워크 작업이 진행되는 동안 앱의 화면을 업데이트할 수 없기 때문에 앱이 버벅거리는 문제가 발생한다.

<br/>

#### ⭐️ 이러한 문제를 해결하기 위해, 네트워크 작업처럼 시간이 오래 걸리는 작업을 메인스레드가 아닌 다른 스레드에서 작업하도록 해야한다. (분산처리)

<br/>
<br/>

> 분산처리를 어떻게 하는지에 대한 코딩 방법 : <br/>
**비동기 처리 / 동시성 프로그래밍**

<br/>

### iOS에서의 동시성 처리 방법
#### 작업을 대기행렬(큐)에 보내면, 운영체제가 알아서 여러 스레드로 나눠서  분산처리(동시적 처리)를 한다.

<br/>

#### 실제 스레드는 메인스레드만 계속 존재하고, 큐에 작업이 들어오면 다른 스레드를 생성해서 사용했다가 없어지는 방식으로 동작한다.

<br/>

### Queue (대기행렬)
* FIFO으로 동작한다.
* 실제로 큐에 작업이 쌓이는건 아니고, 들어오는 즉시 다른 스레드에 배치시킨다.